import Adept from "./unit/Adept.webp";
import Archon from "./unit/Archon.webp";
import Armory from "./unit/Armory.webp";
import Assimilator from "./unit/Assimilator.webp";
import AutoTurret from "./unit/AutoTurret.webp";
import Baneling from "./unit/Baneling.webp";
import BanelingNest from "./unit/BanelingNest.webp";
import Banshee from "./unit/Banshee.webp";
import Barracks from "./unit/Barracks.webp";
import BarracksReactor from "./unit/BarracksReactor.webp";
import BarracksTechLab from "./unit/BarracksTechLab.webp";
import Battlecruiser from "./unit/Battlecruiser.webp";
import Broodling from "./unit/Broodling.webp";
import BroodLord from "./unit/BroodLord.webp";
import Bunker from "./unit/Bunker.webp";
import Carrier from "./unit/Carrier.webp";
import Changeling from "./unit/Changeling.webp";
import Colossus from "./unit/Colossus.webp";
import CommandCenter from "./unit/CommandCenter.webp";
import Corruptor from "./unit/Corruptor.webp";
import CreepTumor from "./unit/CreepTumor.webp";
import CreepTumorQueen from "./unit/CreepTumorQueen.webp";
import CyberneticsCore from "./unit/CyberneticsCore.webp";
import Cyclone from "./unit/Cyclone.webp";
import DarkShrine from "./unit/DarkShrine.webp";
import DarkTemplar from "./unit/DarkTemplar.webp";
import Disruptor from "./unit/Disruptor.webp";
import Drone from "./unit/Drone.webp";
import EngineeringBay from "./unit/EngineeringBay.webp";
import EvolutionChamber from "./unit/EvolutionChamber.webp";
import Extractor from "./unit/Extractor.webp";
import Factory from "./unit/Factory.webp";
import FactoryReactor from "./unit/FactoryReactor.webp";
import FactoryTechLab from "./unit/FactoryTechLab.webp";
import FleetBeacon from "./unit/FleetBeacon.webp";
import Forge from "./unit/Forge.webp";
import FusionCore from "./unit/FusionCore.webp";
import Gateway from "./unit/Gateway.webp";
import Ghost from "./unit/Ghost.webp";
import GhostAcademy from "./unit/GhostAcademy.webp";
import GreaterSpire from "./unit/GreaterSpire.webp";
import Hatchery from "./unit/Hatchery.webp";
import Hellbat from "./unit/Hellbat.webp";
import Hellion from "./unit/Hellion.webp";
import HighTemplar from "./unit/HighTemplar.webp";
import Hive from "./unit/Hive.webp";
import Hydralisk from "./unit/Hydralisk.webp";
import HydraliskDen from "./unit/HydraliskDen.webp";
import Immortal from "./unit/Immortal.webp";
import InfestationPit from "./unit/InfestationPit.webp";
import InfestedTerran from "./unit/InfestedTerran.webp";
import Infestor from "./unit/Infestor.webp";
import Lair from "./unit/Lair.webp";
import Larva from "./unit/Larva.webp";
import Liberator from "./unit/Liberator.webp";
import LiberatorAG from "./unit/LiberatorAG.webp";
import Lurker from "./unit/Lurker.webp";
import LurkerDen from "./unit/LurkerDen.webp";
import Marauder from "./unit/Marauder.webp";
import Marine from "./unit/Marine.webp";
import Medivac from "./unit/Medivac.webp";
import MissileTurret from "./unit/MissileTurret.webp";
import Mothership from "./unit/Mothership.webp";
import MothershipCore from "./unit/MothershipCore.webp";
import MULE from "./unit/MULE.webp";
import Mutalisk from "./unit/Mutalisk.webp";
import Nexus from "./unit/Nexus.webp";
import NydusNetwork from "./unit/NydusNetwork.webp";
import NydusWorm from "./unit/NydusWorm.webp";
import Observer from "./unit/Observer.webp";
import Oracle from "./unit/Oracle.webp";
import OrbitalCommand from "./unit/OrbitalCommand.webp";
import Overlord from "./unit/Overlord.webp";
import Overseer from "./unit/Overseer.webp";
import Phoenix from "./unit/Phoenix.webp";
import PhotonCannon from "./unit/PhotonCannon.webp";
import PlanetaryFortress from "./unit/PlanetaryFortress.webp";
import PointDefenseDrone from "./unit/PointDefenseDrone.webp";
import Probe from "./unit/Probe.webp";
import Pylon from "./unit/Pylon.webp";
import Queen from "./unit/Queen.webp";
import Ravager from "./unit/Ravager.webp";
import Raven from "./unit/Raven.webp";
import Reactor from "./unit/Reactor.webp";
import Reaper from "./unit/Reaper.webp";
import Refinery from "./unit/Refinery.webp";
import Roach from "./unit/Roach.webp";
import RoachWarren from "./unit/RoachWarren.webp";
import RoboticsBay from "./unit/RoboticsBay.webp";
import RoboticsFacility from "./unit/RoboticsFacility.webp";
import SCV from "./unit/SCV.webp";
import SensorTower from "./unit/SensorTower.webp";
import Sentry from "./unit/Sentry.webp";
import ShieldBattery from "./unit/ShieldBattery.webp";
import SiegeTank from "./unit/SiegeTank.webp";
import SiegeTankSieged from "./unit/SiegeTankSieged.webp";
import SpawningPool from "./unit/SpawningPool.webp";
import SpineCrawler from "./unit/SpineCrawler.webp";
import Spire from "./unit/Spire.webp";
import SporeCrawler from "./unit/SporeCrawler.webp";
import Stalker from "./unit/Stalker.webp";
import Stargate from "./unit/Stargate.webp";
import Starport from "./unit/Starport.webp";
import StarportReactor from "./unit/StarportReactor.webp";
import StarportTechLab from "./unit/StarportTechLab.webp";
import StasisWard from "./unit/StasisWard.webp";
import SupplyDepot from "./unit/SupplyDepot.webp";
import SwarmHost from "./unit/SwarmHost.webp";
import TechLab from "./unit/TechLab.webp";
import Tempest from "./unit/Tempest.webp";
import TemplarArchives from "./unit/TemplarArchives.webp";
import Thor from "./unit/Thor.webp";
import TwilightCouncil from "./unit/TwilightCouncil.webp";
import Ultralisk from "./unit/Ultralisk.webp";
import UltraliskCavern from "./unit/UltraliskCavern.webp";
import Viking from "./unit/Viking.webp";
import VikingAssault from "./unit/VikingAssault.webp";
import VikingFighter from "./unit/VikingFighter.webp";
import Viper from "./unit/Viper.webp";
import VoidRay from "./unit/VoidRay.webp";
import WarpGate from "./unit/WarpGate.webp";
import WarpPrism from "./unit/WarpPrism.webp";
import WidowMine from "./unit/WidowMine.webp";
import Zealot from "./unit/Zealot.webp";
import Zergling from "./unit/Zergling.webp";

const icons = new Map();

icons.set("Adept", Adept);
icons.set("Archon", Archon);
icons.set("Armory", Armory);
icons.set("Assimilator", Assimilator);
icons.set("AssimilatorRich", Assimilator);
icons.set("AutoTurret", AutoTurret);
icons.set("Baneling", Baneling);
icons.set("BanelingNest", BanelingNest);
icons.set("Banshee", Banshee);
icons.set("Barracks", Barracks);
icons.set("BarracksReactor", BarracksReactor);
icons.set("BarracksTechLab", BarracksTechLab);
icons.set("Battlecruiser", Battlecruiser);
icons.set("Broodling", Broodling);
icons.set("BroodLord", BroodLord);
icons.set("Bunker", Bunker);
icons.set("Carrier", Carrier);
icons.set("Changeling", Changeling);
icons.set("Colossus", Colossus);
icons.set("CommandCenter", CommandCenter);
icons.set("Corruptor", Corruptor);
icons.set("CreepTumor", CreepTumor);
icons.set("CreepTumorQueen", CreepTumorQueen);
icons.set("CyberneticsCore", CyberneticsCore);
icons.set("Cyclone", Cyclone);
icons.set("DarkShrine", DarkShrine);
icons.set("DarkTemplar", DarkTemplar);
icons.set("Disruptor", Disruptor);
icons.set("Drone", Drone);
icons.set("EngineeringBay", EngineeringBay);
icons.set("EvolutionChamber", EvolutionChamber);
icons.set("Extractor", Extractor);
icons.set("Factory", Factory);
icons.set("FactoryReactor", FactoryReactor);
icons.set("FactoryTechLab", FactoryTechLab);
icons.set("FleetBeacon", FleetBeacon);
icons.set("Forge", Forge);
icons.set("FusionCore", FusionCore);
icons.set("Gateway", Gateway);
icons.set("Ghost", Ghost);
icons.set("GhostAcademy", GhostAcademy);
icons.set("GreaterSpire", GreaterSpire);
icons.set("Hatchery", Hatchery);
icons.set("Hellbat", Hellbat);
icons.set("Hellion", Hellion);
icons.set("HighTemplar", HighTemplar);
icons.set("Hive", Hive);
icons.set("Hydralisk", Hydralisk);
icons.set("HydraliskDen", HydraliskDen);
icons.set("Immortal", Immortal);
icons.set("InfestationPit", InfestationPit);
icons.set("InfestedTerran", InfestedTerran);
icons.set("Infestor", Infestor);
icons.set("Lair", Lair);
icons.set("Larva", Larva);
icons.set("Liberator", Liberator);
icons.set("LiberatorAG", LiberatorAG);
icons.set("Lurker", Lurker);
icons.set("LurkerMP", Lurker);
icons.set("LurkerDen", LurkerDen);
icons.set("Marauder", Marauder);
icons.set("Marine", Marine);
icons.set("Medivac", Medivac);
icons.set("MissileTurret", MissileTurret);
icons.set("Mothership", Mothership);
icons.set("MothershipCore", MothershipCore);
icons.set("MULE", MULE);
icons.set("Mutalisk", Mutalisk);
icons.set("Nexus", Nexus);
icons.set("NydusCanal", NydusWorm);
icons.set("NydusNetwork", NydusNetwork);
icons.set("NydusWorm", NydusWorm);
icons.set("Observer", Observer);
icons.set("Oracle", Oracle);
icons.set("OrbitalCommand", OrbitalCommand);
icons.set("Overlord", Overlord);
icons.set("Overseer", Overseer);
icons.set("Phoenix", Phoenix);
icons.set("PhotonCannon", PhotonCannon);
icons.set("PlanetaryFortress", PlanetaryFortress);
icons.set("PointDefenseDrone", PointDefenseDrone);
icons.set("Probe", Probe);
icons.set("Pylon", Pylon);
icons.set("Queen", Queen);
icons.set("Ravager", Ravager);
icons.set("Raven", Raven);
icons.set("Reactor", Reactor);
icons.set("Reaper", Reaper);
icons.set("Refinery", Refinery);
icons.set("Roach", Roach);
icons.set("RoachWarren", RoachWarren);
icons.set("RoboticsBay", RoboticsBay);
icons.set("RoboticsFacility", RoboticsFacility);
icons.set("SCV", SCV);
icons.set("SensorTower", SensorTower);
icons.set("Sentry", Sentry);
icons.set("ShieldBattery", ShieldBattery);
icons.set("SiegeTank", SiegeTank);
icons.set("SiegeTankSieged", SiegeTankSieged);
icons.set("SpawningPool", SpawningPool);
icons.set("SpineCrawler", SpineCrawler);
icons.set("Spire", Spire);
icons.set("SporeCrawler", SporeCrawler);
icons.set("Stalker", Stalker);
icons.set("Stargate", Stargate);
icons.set("Starport", Starport);
icons.set("StarportReactor", StarportReactor);
icons.set("StarportTechLab", StarportTechLab);
icons.set("StasisWard", StasisWard);
icons.set("SupplyDepot", SupplyDepot);
icons.set("SwarmHost", SwarmHost);
icons.set("TechLab", TechLab);
icons.set("Tempest", Tempest);
icons.set("TemplarArchive", TemplarArchives);
icons.set("TemplarArchives", TemplarArchives);
icons.set("Thor", Thor);
icons.set("TwilightCouncil", TwilightCouncil);
icons.set("Ultralisk", Ultralisk);
icons.set("UltraliskCavern", UltraliskCavern);
icons.set("Viking", Viking);
icons.set("VikingAssault", VikingAssault);
icons.set("VikingFighter", VikingFighter);
icons.set("Viper", Viper);
icons.set("VoidRay", VoidRay);
icons.set("WarpGate", WarpGate);
icons.set("WarpPrism", WarpPrism);
icons.set("WidowMine", WidowMine);
icons.set("Zealot", Zealot);
icons.set("Zergling", Zergling);

import { SmallScreen } from "./screen";

const armyStyle = { position: "relative", display: "flex", alignItems: "center", flexWrap: "wrap", zoom: SmallScreen ? "65%" : "100%" };
const iconStyle = { border: "solid goldenrod", borderRadius: "6px", marginRight: "3px", width: "28px", height: "28px" };
const countStyle = { position: "relative", top: "-4px", fontSize: "28px" };
const crossStyle = { position: "absolute", left: "0px", top: "0px", width: "100%", height: "100%" };

export default function Army({ army, loss }) {
  if (!army) return loss ? (<div>No losses</div>) : null;

  const elements = [];
  let key = 1;

  if (Array.isArray(army)) {
    for (const unit of army) {
      elements.push(<UnitIcon key={ key++ } unit={ unit } />);
    }
  } else {
    const types = Object.keys(army).sort((a, b) => (army[b] - army[a]));

    for (const unit of types) {
      elements.push(
        <span key={ key++ } style={{ whiteSpace: "nowrap" }}>
          <span style={ countStyle }>{ army[unit] }</span>
          <UnitIcon unit={ unit } />
        </span>
      );
    }
  }

  if (loss) {
    if (!elements.length) return (<div>No losses</div>);

    elements.push(<Cross key={ key++ } />);
  }

  return (<div style={ armyStyle }>{ elements }</div>);
}

export function UnitIcon({ unit }) {
  let name = unit;

  if (unit.endsWith("Burrowed")) name = unit.substring(0, unit.length - 8);
  if (unit.startsWith("Changeling")) name = "Changeling";
  if (unit.endsWith("Flying")) name = unit.substring(0, unit.length - 6);

  const icon = icons.get(name);

  if (icon) {
    return (<img src={ icon } title={ unit } alt={ unit } style={ iconStyle } />);
  } else {
    return (<span>{ name }&nbsp;</span>);
  }
}

function Cross() {
  return (
    <svg xmlns="http://www.w3.org/2000/svg" viewBox={ "0 0 50 30" } style={ crossStyle }>
      <line x1="0" y1="5" x2="50" y2="25" stroke="red" />
      <line x1="0" y1="25" x2="50" y2="5" stroke="red" />
    </svg>
  );
}
